(this["webpackJsonpreact-complete-guide"]=this["webpackJsonpreact-complete-guide"]||[]).push([[0],{10:function(e,t,n){"use strict";n.d(t,"f",(function(){return o})),n.d(t,"b",(function(){return l})),n.d(t,"d",(function(){return u})),n.d(t,"a",(function(){return b})),n.d(t,"c",(function(){return m})),n.d(t,"e",(function(){return x}));var c=n(15),a=n(8),r=n.n(a),s="https://cycle-renter.azurewebsites.net/";function o(e){return i.apply(this,arguments)}function i(){return(i=Object(c.a)(r.a.mark((function e(t){var n,c,a,o,i,l,d;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(s,"/cycles/").concat(t.cycleid),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+t.token}});case 2:return n=e.sent,e.next=5,n.json();case 5:if(c=e.sent,a=c.stdid,n.ok){e.next=9;break}throw new Error(c.message||"Could not Rent Cycle");case 9:if("student"!==t.role||"rented"!==c.status){e.next=11;break}throw new Error("Cycle already Rented");case 11:if("guard"!==t.role||""!==c.status){e.next=13;break}throw new Error("Cycle not Rented Yet");case 13:return"student"===t.role&&(o=t.cycleid),"guard"===t.role&&(o=""),"student"===t.role&&(a=t.userid),e.next=18,fetch("".concat(s,"/users/").concat(a),{method:"PATCH",body:JSON.stringify({cycleid:o}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t.token}});case 18:return n=e.sent,e.next=21,n.json();case 21:if(c=e.sent,n.ok){e.next=24;break}throw new Error(c.message||"Could not Rent Cycle.");case 24:return"student"===t.role&&(i=t.userid),"guard"===t.role&&(i=""),"student"===t.role&&(l=t.name),"guard"===t.role&&(l=""),"student"===t.role&&(d="rented"),"guard"===t.role&&(d=""),e.next=32,fetch("".concat(s,"/cycles/").concat(t.cycleid),{method:"PATCH",body:JSON.stringify({status:d,stdid:i,stdname:l}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t.token}});case 32:return n=e.sent,e.next=35,n.json();case 35:if(c=e.sent,n.ok){e.next=38;break}throw new Error(c.message||"Could not Rent Cycle.");case 38:return e.abrupt("return","Cycle Rented");case 39:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(e){return d.apply(this,arguments)}function d(){return(d=Object(c.a)(r.a.mark((function e(t){var n,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(s,"/users/signup"),{method:"POST",body:JSON.stringify(t.student),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t.token}});case 2:return n=e.sent,e.next=5,n.json();case 5:if(c=e.sent,n.ok){e.next=8;break}throw new Error(c.message||"Could not Add Student.");case 8:return e.abrupt("return","Student Added");case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(e){return j.apply(this,arguments)}function j(){return(j=Object(c.a)(r.a.mark((function e(t){var n,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(s,"/users/").concat(t.student.email),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer "+t.token}});case 2:return n=e.sent,e.next=5,n.json();case 5:if(c=e.sent,n.ok){e.next=8;break}throw new Error(c.message||"Could not Delete Student.");case 8:return e.abrupt("return","Student Deleted");case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e){return O.apply(this,arguments)}function O(){return(O=Object(c.a)(r.a.mark((function e(t){var n,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(s,"/cycles/add"),{method:"POST",body:JSON.stringify(t.cycle),headers:{"Content-Type":"application/json",Authorization:"Bearer "+t.token}});case 2:return n=e.sent,e.next=5,n.json();case 5:if(c=e.sent,n.ok){e.next=8;break}throw new Error(c.message||"Could not Add Cycle.");case 8:return e.abrupt("return","Student Added");case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return h.apply(this,arguments)}function h(){return(h=Object(c.a)(r.a.mark((function e(t){var n,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(s,"/cycles/").concat(t.cycleid),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer "+t.token}});case 2:return n=e.sent,e.next=5,n.json();case 5:if(c=e.sent,n.ok){e.next=8;break}throw new Error(c.message||"Could not Delete Cycle");case 8:return e.abrupt("return","Cycle Deleted");case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e){return p.apply(this,arguments)}function p(){return(p=Object(c.a)(r.a.mark((function e(t){var n,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(s,"/cycles/all"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+t.token}});case 2:return n=e.sent,e.next=5,n.json();case 5:if(c=e.sent,n.ok){e.next=8;break}throw new Error(c.message||"Could not fetch Cycles.");case 8:return e.abrupt("return",c);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},16:function(e,t,n){e.exports={header:"MainNavigation_header__pcWBd",logo:"MainNavigation_logo__3mTft",nav:"MainNavigation_nav__2KJfX",active:"MainNavigation_active__oN3Ka",image:"MainNavigation_image__1Uu62"}},18:function(e,t,n){"use strict";var c=n(38),a=n.n(c),r=n(0);t.a=function(e){return Object(r.jsx)("div",{className:"centered",children:Object(r.jsx)("div",{className:a.a.action,children:Object(r.jsx)("button",{onClick:e.click,type:"button",children:e.children})})})}},21:function(e,t,n){"use strict";var c=n(2),a=n(1),r=n(23),s=n.n(r),o=n(33),i=n(0);t.a=function(e){var t=Object(a.useState)(!1),n=Object(c.a)(t,2),r=n[0],l=n[1];return Object(i.jsxs)("div",{className:s.a.camera,children:[Object(i.jsx)("div",{className:s.a.action,children:Object(i.jsx)("button",{type:"button",onClick:function(){r&&l(!1),r||l(!0)},children:r?"Close Camera":"Open Camera"})}),Object(i.jsx)("div",{className:s.a.camera,children:r&&Object(i.jsx)(o.a,{onFind:function(t,n){t&&e.scan(t),n&&console.info(n)}})})]})}},23:function(e,t,n){e.exports={camera:"Scanner_camera__2iaKL",bu:"Scanner_bu__3hea6",action:"Scanner_action__2ugFY"}},29:function(e,t,n){e.exports={main:"Layout_main__auk_r"}},3:function(e,t,n){e.exports={auth:"AddStudentForm_auth__TS3h4",control:"AddStudentForm_control__1gHrQ",actions:"AddStudentForm_actions__3i30V",toggle:"AddStudentForm_toggle__3pMps"}},32:function(e,t,n){e.exports={spinner:"LoadingSpinner_spinner__2Kyqv"}},38:function(e,t,n){e.exports={action:"Button_action__1h3-3"}},39:function(e,t,n){e.exports={container:"AdminPage_container__1m3KL"}},40:function(e,t,n){e.exports={item:"CycleItem_item__3DiAo"}},41:function(e,t,n){e.exports={list:"CycleList_list__31-ni",sorting:"CycleList_sorting__9l_4o"}},5:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var c,a=n(2),r=n(1),s=n.n(r),o=n(28),i=n.n(o),l=n(26),d=n(0),u=s.a.createContext({token:"",isLoggedIn:!1,userid:"",email:"",password:"",role:"",cycleid:"",data:{},name:"",login:function(e,t,n,c,a,r,s){},logout:function(){},addCycle:function(){}}),j=function(e){var t=(new Date).getTime();return new Date(e).getTime()-t},b=function(e){var t,n,s,o,b,O,m,h,x,p,f=function(){var e=localStorage.getItem("password");if(null!==e&&""!==e&&void 0!==e)try{e=Object(l.a)(localStorage.getItem("password")).value}catch(O){}var t=localStorage.getItem("token"),n=localStorage.getItem("expirationTime"),c=localStorage.getItem("userid"),a=localStorage.getItem("role"),r=localStorage.getItem("email"),s=localStorage.getItem("cycleid"),o=localStorage.getItem("data"),i=localStorage.getItem("name"),d=localStorage.getItem("branch"),u=localStorage.getItem("rollno"),b=j(n);return b<=360?(localStorage.removeItem("token"),localStorage.removeItem("expirationTime"),localStorage.removeItem("userid"),localStorage.removeItem("role"),localStorage.removeItem("cycleid"),localStorage.removeItem("data"),localStorage.removeItem("name"),localStorage.removeItem("password"),localStorage.removeItem("email"),localStorage.removeItem("branch"),localStorage.removeItem("rollno"),null):{token:t,userid:c,role:a,cycleid:s,data:o,name:i,branch:d,password:e,email:r,rollno:u,duration:b}}();f&&(b=f.data,t=f.token,n=f.userid,s=f.role,o=f.cycleid,p=f.password,x=f.email,O=f.name,m=f.branch,h=f.rollno);var g=Object(r.useState)(b),v=Object(a.a)(g,2),S=v[0],y=v[1],N=Object(r.useState)(n),k=Object(a.a)(N,2),C=k[0],w=k[1],I=Object(r.useState)(s),_=Object(a.a)(I,2),R=_[0],A=_[1],E=Object(r.useState)(t),D=Object(a.a)(E,2),T=D[0],q=D[1],L=Object(r.useState)(o),F=Object(a.a)(L,2),P=F[0],z=F[1],G=Object(r.useState)(p),B=Object(a.a)(G,2),J=B[0],M=B[1],U=Object(r.useState)(x),K=Object(a.a)(U,2),H=K[0],Y=K[1],Q=Object(r.useState)(O),V=Object(a.a)(Q,2),W=V[0],X=V[1],Z=Object(r.useState)(m),$=Object(a.a)(Z,2),ee=$[0],te=$[1],ne=Object(r.useState)(h),ce=Object(a.a)(ne,2),ae=ce[0],re=ce[1],se=!!T,oe=Object(r.useCallback)((function(){q(null),w(null),A(null),z(null),y(null),X(null),te(null),M(null),Y(null),re(null),localStorage.removeItem("token"),localStorage.removeItem("expirationTime"),localStorage.removeItem("userid"),localStorage.removeItem("role"),localStorage.removeItem("email"),localStorage.removeItem("password"),localStorage.removeItem("cycleid"),localStorage.removeItem("data"),localStorage.removeItem("name"),localStorage.removeItem("branch"),localStorage.removeItem("rollno"),localStorage.setItem("userIsLoggedIn",!1),c&&clearTimeout(c)}),[]);Object(r.useEffect)((function(){f&&(c=setTimeout(oe,f.duration))}),[f,oe]);var ie={data:S,token:T,isLoggedIn:se,userid:C,role:R,cycleid:P,email:H,password:J,name:W,branch:ee,rollno:ae,login:function(e,t,n,a,r,s,o){var l=j(o),d=i()({value:t},"screte sauce");y(e),q(n),A(r),w(a),Y(e.email),X(e.name),M(t),te(e.branch),re(e.rollno),z(s),localStorage.setItem("token",n),localStorage.setItem("role",r),localStorage.setItem("userid",a),localStorage.setItem("cycleid",s),localStorage.setItem("name",e.name),localStorage.setItem("branch",e.branch),localStorage.setItem("password",d),localStorage.setItem("email",e.email),localStorage.setItem("rollno",e.rollno),localStorage.setItem("userIsLoggedIn",!0),localStorage.setItem("expirationTime",o),localStorage.setItem("data",JSON.stringify(e)),c=setTimeout(oe,l)},logout:oe,addCycle:function(e){localStorage.setItem("cycleid",e),z(e),console.log(e+" incycle"+P)}};return Object(d.jsx)(u.Provider,{value:ie,children:e.children})};t.b=u},54:function(e,t,n){},6:function(e,t,n){"use strict";var c=n(32),a=n.n(c),r=n(0);t.a=function(){return Object(r.jsx)("div",{className:a.a.spinner})}},63:function(e,t,n){"use strict";n.r(t);var c=n(27),a=n.n(c),r=n(14),s=n(5),o=(n(54),n(2)),i=n(1),l=n.n(i),d=n(4),u=n(29),j=n.n(u),b=n.p+"static/media/gogreen.c1a0a6ff.png",O=n(16),m=n.n(O),h=n(0),x=function(){var e=Object(i.useContext)(s.b),t=Object(i.useState)(!1),n=Object(o.a)(t,2),c=n[0],a=n[1],l=Object(i.useState)(!1),d=Object(o.a)(l,2),u=d[0],j=d[1];Object(i.useEffect)((function(){"student"===e.role&&(a(!1),j(!1)),"guard"===e.role&&(a(!0),j(!1)),"admin"===e.role&&(j(!0),a(!1))}),[e,e.role]);var O=function(){e.logout()};return Object(h.jsxs)("header",{className:m.a.header,children:[Object(h.jsxs)("div",{className:m.a.logo,children:[Object(h.jsx)("img",{src:b}),"Green Rides"]}),Object(h.jsx)("nav",{className:m.a.nav,children:Object(h.jsxs)("ul",{children:[e.isLoggedIn&&Object(h.jsx)("li",{children:Object(h.jsx)(r.b,{to:"/mainPage",activeClassName:m.a.active,children:"Main Page"})}),e.isLoggedIn&&!u&&Object(h.jsx)("li",{children:Object(h.jsx)(r.b,{to:"/rent",activeClassName:m.a.active,children:c?"Return":"Rent"})}),e.isLoggedIn&&u&&Object(h.jsx)("li",{children:Object(h.jsx)(r.b,{to:"/admin",activeClassName:m.a.active,children:"Admin"})}),!e.isLoggedIn&&Object(h.jsx)("li",{children:Object(h.jsx)(r.b,{to:"/auth",activeClassName:m.a.active,onClick:O,children:"Login"})}),Object(h.jsx)("li",{children:Object(h.jsx)(r.b,{to:"/cycles",activeClassName:m.a.active,children:"Cycles"})}),e.isLoggedIn&&Object(h.jsx)("li",{children:Object(h.jsx)(r.b,{to:"/auth",activeClassName:m.a.active,onClick:O,children:"Logout"})})]})})]})},p=function(e){return Object(h.jsxs)(i.Fragment,{children:[Object(h.jsx)(x,{}),Object(h.jsx)("main",{className:j.a.main,children:e.children})]})},f=n(6),g=n(21),v=n(3),S=n.n(v),y=n(9),N=n(10),k=function(){var e=Object(i.useState)(!1),t=Object(o.a)(e,2),n=t[0],c=t[1],a=Object(i.useState)(!1),r=Object(o.a)(a,2),l=r[0],d=r[1],u=Object(i.useState)(null),j=Object(o.a)(u,2),b=j[0],O=j[1],m=Object(i.useContext)(s.b),x=Object(y.a)(N.a,!1),p=x.sendRequest,v=x.status,k=x.error;return"pending"===v?Object(h.jsx)("div",{className:"centered",children:Object(h.jsx)(f.a,{})}):k?Object(h.jsx)("p",{className:"centered",children:k}):Object(h.jsxs)("section",{className:S.a.auth,children:[Object(h.jsx)("h1",{children:"Add Cycle"}),Object(h.jsxs)("form",{onSubmit:function(e){e.preventDefault(),c(!0),p({cycle:{cycleid:b,status:"",stdid:""},token:m.token}),k||alert("Cycle Added"),c(!1)},children:[!l&&Object(h.jsx)(g.a,{scan:function(e){O(e),d(!0)}}),l&&Object(h.jsx)("h3",{children:b}),Object(h.jsxs)("div",{className:S.a.actions,children:[!n&&l&&Object(h.jsx)("button",{children:"Add Cycle"}),n&&Object(h.jsx)("p",{children:"Sending Request...."})]})]})]})},C=function(){var e=Object(i.useRef)(),t=Object(i.useRef)(),n=Object(i.useRef)(),c=Object(i.useState)(!1),a=Object(o.a)(c,2),r=a[0],l=a[1],d=Object(i.useState)(!1),u=Object(o.a)(d,2),j=u[0],b=u[1],O=Object(y.a)(N.b,!1),m=O.sendRequest,x=O.status,p=O.error;return"pending"===x?Object(h.jsx)("div",{className:"centered",children:Object(h.jsx)(f.a,{})}):p?Object(h.jsx)("p",{className:"centered",children:p}):Object(h.jsxs)("section",{className:S.a.auth,children:[Object(h.jsx)("h1",{children:"Add Guard"}),Object(h.jsxs)("form",{onSubmit:function(c){c.preventDefault(),b(!0),m({student:{name:e.current.value,email:t.current.value,role:"guard",password:n.current.value},token:s.b.token}),p||alert("Guard Added"),b(!1)},children:[Object(h.jsxs)("div",{className:S.a.control,children:[Object(h.jsx)("label",{htmlFor:"Name",children:"Guard Name"}),Object(h.jsx)("input",{type:"Name",id:"Name",required:!0,ref:e})]}),Object(h.jsxs)("div",{className:S.a.control,children:[Object(h.jsx)("label",{htmlFor:"email",children:"Guard Email"}),Object(h.jsx)("input",{type:"userName",id:"userName",required:!0,ref:t})]}),Object(h.jsxs)("div",{className:S.a.control,children:[Object(h.jsx)("label",{htmlFor:"password",children:"Guard Password"}),Object(h.jsx)("input",{type:r?"text":"password",id:"password",required:!0,ref:n})]}),Object(h.jsx)("input",{type:"checkbox",onClick:function(){r&&l(!1),r||l(!0)}})," Show Password",Object(h.jsxs)("div",{className:S.a.actions,children:[!j&&Object(h.jsx)("button",{children:"Add Guard"}),j&&Object(h.jsx)("p",{children:"Sending Request...."})]})]})]})},w=function(){var e=Object(i.useContext)(s.b),t=Object(i.useRef)(),n=Object(i.useRef)(),c=Object(i.useRef)(),a=Object(i.useState)(!1),r=Object(o.a)(a,2),l=r[0],d=r[1],u=Object(i.useState)(!1),j=Object(o.a)(u,2),b=j[0],O=j[1],m=Object(y.a)(N.b,!1),x=m.sendRequest,p=m.status,g=m.error;if(b)return Object(h.jsx)("div",{className:"centered",children:Object(h.jsx)(f.a,{})});if("pending"===p)return Object(h.jsx)("div",{className:"centered",children:Object(h.jsx)(f.a,{})});if(g)return Object(h.jsx)("p",{className:"centered",children:g});return Object(h.jsxs)("section",{className:S.a.auth,children:[Object(h.jsx)("h1",{children:"Add User"}),Object(h.jsxs)("form",{onSubmit:function(a){a.preventDefault(),O(!0),x({student:{name:t.current.value,rollno:"",branch:"",role:"student",email:n.current.value,password:c.current.value},token:e.token}),g||alert("Student Added"),O(!1)},children:[Object(h.jsxs)("div",{className:S.a.control,children:[Object(h.jsx)("label",{htmlFor:"Name",children:"Name"}),Object(h.jsx)("input",{type:"Name",id:"Name",required:!0,ref:t})]}),Object(h.jsxs)("div",{className:S.a.control,children:[Object(h.jsx)("label",{htmlFor:"email",children:"Email"}),Object(h.jsx)("input",{type:"userName",id:"userName",required:!0,ref:n})]}),Object(h.jsxs)("div",{className:S.a.control,children:[Object(h.jsx)("label",{htmlFor:"password",children:"Password"}),Object(h.jsx)("input",{type:l?"text":"password",id:"password",required:!0,ref:c})]}),Object(h.jsx)("input",{type:"checkbox",onClick:function(){l&&d(!1),l||d(!0)}})," Show Password",Object(h.jsxs)("div",{className:S.a.actions,children:[!b&&Object(h.jsx)("button",{children:"Add Student"}),b&&Object(h.jsx)("p",{children:"Sending Request...."})]})]})]})},I=function(){var e=Object(i.useContext)(s.b),t=Object(i.useState)(!1),n=Object(o.a)(t,2),c=n[0],a=n[1],r=Object(i.useState)(!1),l=Object(o.a)(r,2),d=l[0],u=l[1],j=Object(i.useState)(null),b=Object(o.a)(j,2),O=b[0],m=b[1],x=Object(y.a)(N.c,!1),p=x.sendRequest,v=x.status,k=x.error;return"pending"===v?Object(h.jsx)("div",{className:"centered",children:Object(h.jsx)(f.a,{})}):k?Object(h.jsx)("p",{className:"centered",children:k}):Object(h.jsxs)("section",{className:S.a.auth,children:[Object(h.jsx)("h1",{children:"Delete Cycle"}),Object(h.jsxs)("form",{onSubmit:function(t){t.preventDefault(),a(!0),p({cycleid:O,token:e.token}),k||alert("Cycle Deleted"),a(!1)},children:[!d&&Object(h.jsx)(g.a,{scan:function(e){m(e),u(!0)}}),d&&Object(h.jsx)("h3",{children:O}),Object(h.jsxs)("div",{className:S.a.actions,children:[!c&&d&&Object(h.jsx)("button",{children:"Delete Cycle"}),c&&Object(h.jsx)("p",{children:"Sending Request...."})]})]})]})},_=function(){var e=Object(i.useContext)(s.b),t=Object(i.useRef)(),n=Object(i.useState)(!1),c=Object(o.a)(n,2),a=c[0],r=c[1],l=Object(y.a)(N.d,!1),d=l.sendRequest,u=l.status,j=l.error;return"pending"===u?Object(h.jsx)("div",{className:"centered",children:Object(h.jsx)(f.a,{})}):j?Object(h.jsx)("p",{className:"centered",children:j}):Object(h.jsxs)("section",{className:S.a.auth,children:[Object(h.jsx)("h1",{children:"Delete Guard"}),Object(h.jsxs)("form",{onSubmit:function(n){n.preventDefault(),r(!0),d({student:{email:t.current.value},token:e.token}),j||alert("Guard Deleted"),r(!1)},children:[Object(h.jsxs)("div",{className:S.a.control,children:[Object(h.jsx)("label",{htmlFor:"email",children:"Guard Email"}),Object(h.jsx)("input",{type:"userName",id:"userName",required:!0,ref:t})]}),Object(h.jsxs)("div",{className:S.a.actions,children:[!a&&Object(h.jsx)("button",{children:"Delete Guard"}),a&&Object(h.jsx)("p",{children:"Sending Request...."})]})]})]})},R=function(){var e=Object(i.useContext)(s.b),t=Object(i.useRef)(),n=Object(i.useState)(!1),c=Object(o.a)(n,2),a=c[0],r=c[1],l=Object(y.a)(N.d,!1),d=l.sendRequest,u=l.status,j=l.error;return a||"pending"===u?Object(h.jsx)("div",{className:"centered",children:Object(h.jsx)(f.a,{})}):j?Object(h.jsx)("p",{className:"centered",children:j}):Object(h.jsxs)("section",{className:S.a.auth,children:[Object(h.jsx)("h1",{children:"Delete User"}),Object(h.jsxs)("form",{onSubmit:function(n){n.preventDefault(),r(!0),d({student:{email:t.current.value},token:e.token}),j||alert("Student Deleted"),r(!1)},children:[Object(h.jsxs)("div",{className:S.a.control,children:[Object(h.jsx)("label",{htmlFor:"email",children:"User Email"}),Object(h.jsx)("input",{type:"userName",id:"userName",required:!0,ref:t})]}),Object(h.jsxs)("div",{className:S.a.actions,children:[!a&&Object(h.jsx)("button",{children:"Delete Student"}),a&&Object(h.jsx)("p",{children:"Sending Request...."})]})]})]})},A=n(18),E=function(e){return Object(h.jsx)("section",{children:Object(h.jsxs)("form",{children:[Object(h.jsxs)("div",{className:"centered",children:[Object(h.jsx)(A.a,{click:e.printadds,children:"Add User"}),Object(h.jsx)(A.a,{click:e.printdels,children:"Delete User"}),Object(h.jsx)(A.a,{click:e.printaddg,children:"Add Guard"}),Object(h.jsx)(A.a,{click:e.printdelg,children:"Delete Guard"})]}),Object(h.jsxs)("div",{className:"centered",children:[Object(h.jsx)(A.a,{click:e.printaddc,children:"Add Cycle"}),Object(h.jsx)(A.a,{click:e.printdelc,children:"Delete Cycle"})]})]})})},D=n(39),T=n.n(D),q=function(){var e=Object(i.useState)(!1),t=Object(o.a)(e,2),n=t[0],c=t[1],a=Object(i.useState)(!1),r=Object(o.a)(a,2),s=r[0],l=r[1],d=Object(i.useState)(!1),u=Object(o.a)(d,2),j=u[0],b=u[1],O=Object(i.useState)(!1),m=Object(o.a)(O,2),x=m[0],p=m[1],f=Object(i.useState)(!1),g=Object(o.a)(f,2),v=g[0],S=g[1],y=Object(i.useState)(!1),N=Object(o.a)(y,2),A=N[0],D=N[1];return Object(h.jsx)("div",{className:T.a.container,children:Object(h.jsxs)("div",{children:[n&&Object(h.jsx)(w,{}),s&&Object(h.jsx)(R,{}),j&&Object(h.jsx)(C,{}),x&&Object(h.jsx)(_,{}),v&&Object(h.jsx)(k,{}),A&&Object(h.jsx)(I,{}),Object(h.jsx)(E,{printadds:function(){n&&c(!1),n||(c(!0),l(!1),b(!1),p(!1),S(!1),D(!1))},printdels:function(){s&&l(!1),s||(c(!1),l(!0),b(!1),p(!1),S(!1),D(!1))},printaddg:function(){j&&b(!1),j||(c(!1),l(!1),b(!0),p(!1),S(!1),D(!1))},printdelg:function(){x&&p(!1),x||(c(!1),l(!1),b(!1),p(!0),S(!1),D(!1))},printaddc:function(){v&&S(!1),v||(c(!1),l(!1),b(!1),p(!1),S(!0),D(!1))},printdelc:function(){A&&D(!1),A||(c(!1),l(!1),b(!1),p(!1),S(!1),D(!0))}})]})})},L=n(40),F=n.n(L),P=function(e){return"Not Rented","rented"===e.status&&"Rented",Object(h.jsx)("li",{className:F.a.item,children:Object(h.jsx)("figure",{children:Object(h.jsxs)("blockcycle",{children:[Object(h.jsxs)("p",{children:["Cycle Id: ",e.id]}),Object(h.jsxs)("p",{children:["Name: ",e.stdname]})]})})})},z=n(41),G=n.n(z),B=function(e){return 0===e.cycles.length?Object(h.jsx)(i.Fragment,{children:Object(h.jsx)("div",{className:"centered",children:Object(h.jsx)("h1",{children:"No Cycles Rented"})})}):Object(h.jsx)(i.Fragment,{children:Object(h.jsx)("ul",{className:G.a.list,children:e.cycles.map((function(e){return Object(h.jsx)(P,{stdid:e.stdid,id:e.cycleid,status:e.status,stdname:e.stdname},e.cycleid)}))})})},J=function(){var e=Object(i.useContext)(s.b),t=Object(i.useState)(!0),n=Object(o.a)(t,2),c=n[0],a=n[1],r=Object(y.a)(N.e,!1),l=r.sendRequest,d=r.status,u=r.data,j=r.error;return c&&(a(!1),l({token:e.token})),"pending"===d?Object(h.jsx)("div",{className:"centered",children:Object(h.jsx)(f.a,{})}):j?Object(h.jsx)("p",{className:"centered",children:j}):Object(h.jsx)(i.Fragment,{children:Object(h.jsx)(B,{cycles:u})})};var M=function(){var e=l.a.lazy((function(){return n.e(7).then(n.bind(null,69))})),t=l.a.lazy((function(){return n.e(3).then(n.bind(null,71))})),c=l.a.lazy((function(){return n.e(4).then(n.bind(null,72))})),a=l.a.lazy((function(){return n.e(5).then(n.bind(null,70))})),r=l.a.lazy((function(){return n.e(6).then(n.bind(null,73))})),u=Object(i.useContext)(s.b),j=Object(i.useState)(!1),b=Object(o.a)(j,2),O=b[0],m=b[1],x=Object(i.useState)(!1),g=Object(o.a)(x,2),v=g[0],S=g[1],y=u.isLoggedIn;return Object(i.useEffect)((function(){y&&(m(!0),fetch("https://cycle-renter.azurewebsites.net//users/login",{method:"POST",body:JSON.stringify({email:u.email,password:u.password}),headers:{"Content-Type":"application/json"}}).then((function(e){return m(!1),e.ok?e.json():(u.logout(),e.json().then((function(e){var t="Authentication Failed";throw e&&e.error&&e.error.message&&(m(!1),t=e.error.message),new Error(t)})))})).then((function(e){var t=new Date((new Date).getTime()+36e6);u.login(e,u.password,e.token,e._id,e.role,e.cycleid,t.toISOString())})).catch((function(e){alert(e.message)})))}),[y]),Object(i.useEffect)((function(){"admin"===u.role?S(!0):S(!1)}),[v,u.role,u]),O?Object(h.jsx)("div",{className:"centered",children:Object(h.jsx)(f.a,{})}):Object(h.jsx)(p,{children:Object(h.jsx)(i.Suspense,{fallback:Object(h.jsx)("div",{className:"centered",children:Object(h.jsx)(f.a,{})}),children:Object(h.jsxs)(d.d,{children:[Object(h.jsxs)(d.b,{path:"/",exact:!0,children:[y&&Object(h.jsx)(d.a,{to:"/mainPage"}),!y&&Object(h.jsx)(d.a,{to:"/auth"})]}),Object(h.jsxs)(d.b,{path:"/signup",children:[y&&Object(h.jsx)(d.a,{to:"/mainPage"}),!y&&Object(h.jsx)(r,{})]}),Object(h.jsxs)(d.b,{path:"/auth",children:[y&&Object(h.jsx)(d.a,{to:"/mainPage"}),!y&&Object(h.jsx)(c,{})]}),Object(h.jsxs)(d.b,{path:"/mainPage",children:[y&&Object(h.jsx)(t,{}),!y&&Object(h.jsx)(d.a,{to:"/auth"})]}),Object(h.jsxs)(d.b,{path:"/rent",children:[y&&Object(h.jsx)(a,{}),!y&&Object(h.jsx)(d.a,{to:"/auth"})]}),Object(h.jsxs)(d.b,{path:"/admin",children:[y&&v&&Object(h.jsx)(q,{}),y&&!v&&Object(h.jsx)(d.a,{to:"/auth"}),!y&&!v&&Object(h.jsx)(d.a,{to:"/auth"})]}),Object(h.jsx)(d.b,{path:"/cycles",children:Object(h.jsx)(J,{})}),Object(h.jsx)(d.b,{path:"*",children:Object(h.jsx)(e,{})})]})})})};a.a.createRoot(document.getElementById("root")).render(Object(h.jsx)(s.a,{children:Object(h.jsx)(r.a,{children:Object(h.jsx)(M,{})})}))},9:function(e,t,n){"use strict";var c=n(43),a=n(15),r=n(2),s=n(8),o=n.n(s),i=n(1);function l(e,t){return"SEND"===t.type?{data:null,error:null,status:"pending"}:"SUCCESS"===t.type?{data:t.responseData,error:null,status:"completed"}:"ERROR"===t.type?{data:null,error:t.errorMessage,status:"completed"}:e}t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Object(i.useReducer)(l,{status:t?"pending":null,data:null,error:null}),s=Object(r.a)(n,2),d=s[0],u=s[1],j=Object(i.useCallback)(function(){var t=Object(a.a)(o.a.mark((function t(n){var c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u({type:"SEND"}),t.prev=1,t.next=4,e(n);case 4:c=t.sent,u({type:"SUCCESS",responseData:c}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),u({type:"ERROR",errorMessage:t.t0.message||"Something went wrong!"});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}(),[e]);return Object(c.a)({sendRequest:j},d)}}},[[63,1,2]]]);
//# sourceMappingURL=main.62bb2957.chunk.js.map