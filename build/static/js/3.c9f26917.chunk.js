(this["webpackJsonpreact-complete-guide"]=this["webpackJsonpreact-complete-guide"]||[]).push([[3],{64:function(e,c,t){e.exports={form:"ProfileForm_form__2xGgc",control:"ProfileForm_control__2YUZH",action:"ProfileForm_action__opJ_6"}},65:function(e,c,t){e.exports={profile:"UserProfile_profile__gQOnH",action:"UserProfile_action__8zxDu"}},71:function(e,c,t){"use strict";t.r(c);var r=t(2),n=t(1),s=t(5),o=t(4),a=t(64),i=t.n(a),l=t(0),u=function(e){var c=Object(o.g)(),t=Object(n.useRef)();return Object(l.jsxs)("form",{className:i.a.form,onSubmit:function(r){r.preventDefault();var n=t.current.value;fetch("".concat("https://pacific-fortress-54764.herokuapp.com","/users/password/").concat(e.userid),{method:"PATCH",body:JSON.stringify({password:n}),headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.token}}).then((function(e){c.replace("/")}))},children:[Object(l.jsxs)("div",{className:i.a.control,children:[Object(l.jsx)("label",{htmlFor:"new-password",children:"New Password"}),Object(l.jsx)("input",{type:"password",id:"new-password",ref:t})]}),Object(l.jsx)("div",{className:i.a.action,children:Object(l.jsx)("button",{children:"Change Password"})})]})},d=function(e){var c=Object(n.useState)(!1),t=Object(r.a)(c,2),s=t[0],o=t[1];Object(n.useEffect)((function(){"guard"!==e.user.role&&"admin"!==e.user.role||o(!0)}),[e.user.role]);var a=e.user.cycleid?e.user.cycleid:"No Cycle Rented Yet";return Object(l.jsxs)("div",{children:[Object(l.jsxs)("h3",{className:"centered",children:["Name : ",e.user.name]}),!s&&Object(l.jsx)(l.Fragment,{children:Object(l.jsxs)("h4",{className:"centered",children:["Cycle Id : ",a]})})]})},j=t(65),b=t.n(j),f=function(){var e=Object(n.useContext)(s.b),c=Object(n.useState)(!1),t=Object(r.a)(c,2),o=t[0],a=t[1],i={name:e.name,branch:e.branch,rollno:e.rollno,cycleid:e.cycleid?e.cycleid:"",role:e.role};return Object(l.jsxs)("section",{className:b.a.profile,children:[Object(l.jsx)("h1",{children:"User Profile"}),Object(l.jsx)(d,{user:i}),o&&Object(l.jsx)(u,{token:localStorage.getItem("token"),userid:e.userid}),Object(l.jsx)("div",{className:b.a.action,children:Object(l.jsx)("button",{onClick:function(){o&&a(!1),o||a(!0)},children:o?"Cancel":"Change Password"})})]})};c.default=function(){return Object(l.jsx)(f,{})}}}]);
//# sourceMappingURL=3.c9f26917.chunk.js.map